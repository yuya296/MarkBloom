@import url("https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20,400,0,0");

:root {
  color-scheme: light dark;
  font-family: var(
    --vscode-font-family,
    "Noto Sans JP",
    "Noto Sans",
    "Yu Gothic",
    "YuGothic",
    "Hiragino Kaku Gothic ProN",
    "Hiragino Kaku Gothic Pro",
    sans-serif
  );
  background: var(--app-bg);
  color: var(--app-text);
  --app-bg: var(--vscode-editor-background, #ffffff);
  --app-surface: var(--vscode-editor-background, #ffffff);
  --app-text: var(--vscode-editor-foreground, #1f1e1c);
  --app-muted: var(--vscode-descriptionForeground, #6a6257);
  --app-subtle: var(--vscode-descriptionForeground, #4c463c);
  --app-border: var(--vscode-editorWidget-border, #e5e7eb);
  --app-pill-bg: var(--vscode-editorWidget-background, #f8fafc);
  --app-pill-border: var(--vscode-editorWidget-border, #e5e7eb);
  --app-button-bg: var(--vscode-button-secondaryBackground, #f3f4f6);
  --app-button-border: var(
    --vscode-button-secondaryBorder,
    var(--vscode-editorWidget-border, #e5e7eb)
  );
  --app-input-bg: var(--vscode-input-background, #ffffff);
  --app-input-border: var(--vscode-input-border, #d1d5db);
  --editor-primary-color: var(--vscode-textLink-foreground, #0f5b9e);
  --editor-secondary-color: var(--vscode-descriptionForeground, #8f8a7f);
  --editor-surface: var(--vscode-editor-background, #ffffff);
  --editor-border: var(--vscode-editorWidget-border, #e5e7eb);
  --editor-text-color: var(--vscode-editor-foreground, #1f1e1c);
  --editor-gutter-bg: var(--vscode-editorGutter-background, transparent);
  --editor-gutter-color: var(--vscode-editorLineNumber-foreground, #8f8a7f);
  --editor-diff-added: color-mix(
    in srgb,
    var(--vscode-editorGutter-addedBackground, #2ea043) 58%,
    transparent
  );
  --editor-diff-modified: color-mix(
    in srgb,
    var(--vscode-editorGutter-modifiedBackground, #d29922) 58%,
    transparent
  );
  --editor-diff-rail: var(--vscode-editorLineNumber-foreground, rgba(143, 138, 127, 0.4));
  --editor-selection-bg: var(
    --vscode-editor-selectionBackground,
    rgba(15, 91, 158, 0.2)
  );
  --editor-active-line-bg: var(
    --vscode-editor-lineHighlightBackground,
    rgba(15, 91, 158, 0.06)
  );
  --editor-active-line-gutter-bg: var(
    --vscode-editor-lineHighlightBorder,
    rgba(15, 91, 158, 0.08)
  );
  --editor-caret-color: var(--vscode-editorCursor-foreground, #0f5b9e);
  --editor-checkbox-accent: var(--vscode-textLink-foreground, #0f5b9e);
  --editor-checkbox-disabled-opacity: 0.55;
  --mb-font-mono: var(
    --vscode-editor-font-family,
    "JetBrains Mono",
    "SF Mono",
    ui-monospace,
    SFMono-Regular,
    Menlo,
    monospace
  );
  --mb-inline-code-bg: var(
    --vscode-editorHoverWidget-background,
    rgba(15, 91, 158, 0.08)
  );
  --mb-code-block-bg: var(--vscode-textCodeBlock-background, #f2f2f2);
  --mb-quote-border-color: var(--vscode-textBlockQuote-border, #b9b1a4);
  --mb-hr-color: var(--vscode-editor-foreground, #6a6257);
  --mb-link-color: var(--vscode-textLink-foreground, #0f5b9e);
  --mb-heading-underline-color: var(
    --vscode-editorWidget-border,
    #d0d0d0
  );
  --syntax-comment: var(--vscode-editorTokenComment-foreground, #6a737d);
  --syntax-keyword: var(--vscode-editorTokenKeyword-foreground, #d73a49);
  --syntax-operator: var(--vscode-editorTokenOperator-foreground, #d73a49);
  --syntax-string: var(--vscode-editorTokenString-foreground, #032f62);
  --syntax-number: var(--vscode-editorTokenNumber-foreground, #005cc5);
  --syntax-atom: var(--vscode-editorTokenConstant-foreground, #005cc5);
  --syntax-function: var(--vscode-editorTokenFunction-foreground, #6f42c1);
  --syntax-variable: var(--vscode-editorTokenVariable-foreground, #24292e);
  --syntax-type: var(--vscode-editorTokenType-foreground, #6f42c1);
  --syntax-property: var(--vscode-editorTokenProperty-foreground, #005cc5);
  --syntax-tag: var(--vscode-editorTokenTag-foreground, #22863a);
  --syntax-link: var(--vscode-textLink-foreground, #032f62);
  --syntax-heading: var(--vscode-editor-foreground, #24292e);
  --syntax-meta: var(--vscode-editorTokenComment-foreground, #6a737d);
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  background: var(--app-bg);
  color: var(--app-text);
}

#app {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  padding: 12px;
  background: var(--app-bg);
}

.webview-toolbar {
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 40;
}

.toolbar-group {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px;
  border-radius: 10px;
  background: var(--app-pill-bg);
  border: 1px solid var(--app-pill-border);
}

.icon-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border-radius: 8px;
  border: 1px solid transparent;
  background: transparent;
  color: var(--app-text);
  cursor: pointer;
  transition: background 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
}

.icon-button:hover {
  background: var(--app-button-bg);
  border-color: var(--app-button-border);
}

.icon-button[aria-pressed="true"] {
  background: var(--app-pill-bg);
  border-color: var(--app-pill-border);
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);
}

.icon-button .icon {
  width: 20px;
  height: 20px;
}

.icon-button .material-symbols-outlined {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-family: "Material Symbols Outlined";
  font-size: 20px;
  line-height: 1;
  font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 20;
}

.icon-button [data-icon="width-normal"] {
  transform: scaleX(-1);
}

.slide-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 32px;
  padding: 0;
  border: 1px solid transparent;
  border-radius: 999px;
  background: transparent;
  color: var(--app-text);
  cursor: pointer;
}

.slide-toggle:hover {
  border-color: var(--app-button-border);
  background: var(--app-button-bg);
}

.slide-toggle-track {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  width: 64px;
  height: 28px;
  padding: 2px 6px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.12);
}

.slide-toggle-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  font-family: "Material Symbols Outlined";
  font-size: 20px;
  color: rgba(255, 255, 255, 0.75);
}

.slide-toggle-thumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 24px;
  height: 24px;
  border-radius: 999px;
  background: #d7dbe2;
  color: #2a3038;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: transform 160ms ease;
}

.slide-toggle-thumb .material-symbols-outlined {
  font-family: "Material Symbols Outlined";
  font-size: 16px;
  line-height: 1;
}

.webview-app[data-editable="true"] .slide-toggle-icon--right,
.webview-app[data-editable="false"] .slide-toggle-icon--left {
  visibility: hidden;
}

.webview-app[data-editable="true"] .slide-toggle-thumb {
  transform: translateX(36px);
}

.webview-app[data-editable="true"] [data-thumb-icon="visibility"],
.webview-app[data-editable="false"] [data-thumb-icon="edit"] {
  display: none;
}

.webview-app[data-editable="true"] [data-icon="visibility"],
.webview-app[data-editable="false"] [data-icon="edit"],
.webview-app[data-width="default"] [data-icon="width-full"],
.webview-app[data-width="wide"] [data-icon="width-normal"] {
  display: none;
}

.webview-app[data-editable="false"] .cm6-table-editor .cm-table-overlay-input,
.webview-app[data-editable="false"] .cm6-table-editor .cm-table-context-menu,
.webview-app[data-editable="false"] .cm6-table-editor .cm-table-col-handle,
.webview-app[data-editable="false"] .cm6-table-editor .cm-table-row-handle {
  display: none;
}

.view-mode-toast {
  position: fixed;
  right: 24px;
  bottom: 24px;
  padding: 8px 12px;
  border-radius: 8px;
  background: rgba(20, 24, 30, 0.9);
  color: #f2f4f8;
  font-size: 12px;
  letter-spacing: 0.01em;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  opacity: 0;
  transform: translateY(6px);
  transition: opacity 160ms ease, transform 160ms ease;
  pointer-events: none;
  z-index: 50;
}

.view-mode-toast[data-visible="true"] {
  opacity: 1;
  transform: translateY(0);
}

.webview-main {
  flex: 1;
  display: flex;
}

.editor-shell {
  width: 100%;
}

.webview-app[data-width="default"] .editor-shell {
  max-width: 600px;
  margin: 0 auto;
}

.webview-app[data-width="wide"] .editor-shell {
  max-width: none;
}

.editor {
  border-radius: 8px;
  background: var(--editor-surface);
  min-height: calc(100vh - 80px);
  width: 100%;
}

footer.footer {
  font-size: 12px;
  color: var(--app-muted);
}

.cm-editor,
.cm-editor .cm-content {
  font-family: var(
    --vscode-font-family,
    "Noto Sans JP",
    "Noto Sans",
    "Yu Gothic",
    "YuGothic",
    "Hiragino Kaku Gothic ProN",
    "Hiragino Kaku Gothic Pro",
    sans-serif
  );
}

.cm-editor {
  height: 100%;
  font-size: 14px;
}

.cm-editor.cm-focused {
  outline: none;
}

.cm-editor .cm-gutters {
  background: var(--editor-gutter-bg);
  color: var(--editor-gutter-color);
}

.cm-editor .cm-content {
  padding: 12px;
  line-height: 2;
}

.cm-editor .cm-line,
.cm-editor .cm-lineWrapping {
  line-height: 2;
}

.cm-editor .mb-syntax-secondary {
  color: var(--editor-secondary-color);
}

.cm-editor .mb-preview-widget {
  color: var(--editor-secondary-color);
  font-style: italic;
}

.cm-editor .cm-lp-mermaid {
  display: block;
  margin: 0.6rem 0;
  padding: 0.75rem;
  border: 1px solid var(--editor-border);
  border-radius: 8px;
  background: var(--editor-surface);
  overflow-x: auto;
}

.cm-editor .cm-lp-mermaid-error {
  border-color: var(--editor-diff-modified);
}

.cm-editor .cm-lp-mermaid-content svg {
  display: block;
  max-width: 100%;
  height: auto;
}

.cm-editor .cm-line.cm-lp-mermaid-fence-line-hidden {
  display: none;
}

.cm-editor .cm-lp-task-checkbox {
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
  margin-right: 0.35em;
  transform: translateY(-0.08em);
}

.cm-editor .cm-lp-task-checkbox-input {
  width: 0.95em;
  height: 0.95em;
  margin: 0;
  accent-color: var(--editor-checkbox-accent);
  cursor: pointer;
}

.cm-editor .cm-lp-task-checkbox-input:disabled {
  cursor: not-allowed;
  opacity: var(--editor-checkbox-disabled-opacity);
}

.cm-editor .cm-diff-marker {
  display: inline-block;
  width: 3px;
  height: 100%;
  border-radius: 0;
}

.cm-editor .cm-diff-marker-added {
  background: var(--editor-diff-added);
}

.cm-editor .cm-diff-marker-modified {
  background: var(--editor-diff-modified);
}

.cm-editor .cm-diff-marker-spacer {
  opacity: 0;
}

.cm-editor .cm-diff-gutter {
  position: relative;
}
